<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Tabé€‰é¡¹å¡</title>
</head>
<style>
  .container {
    margin: 30px auto;
    padding: 20px;
    max-width: 800px;
    border-radius: 4px;
    box-shadow: 0px 0px 10px rgba(200, 200, 200, 0.8);
  }

  .tab-header {
    position: relative;
    display: flex;
    margin-bottom: 15px;
    line-height: 30px;
    font-size: 13px;
    font-weight: 1000;
    color: rgba(20, 20, 20, 1);
    border-bottom: 3px solid rgba(200, 200, 200, 1);
  }

  .tab-header .tab-item {
    margin-right: 40px;
    margin-bottom: -3px;
    cursor: pointer;
  }

  .tab-header .tab-item.active {
    color: rgba(0, 150, 255, 0.8);
  }

  .tab-header .line {
    position: absolute;
    top: 100%;
    width: 50px;
    height: 3px;
    transform: translateX();
    transition: all .4s;
    background-color: rgba(0, 150, 255, 0.8);
  }

  .tab-content .tab-panel {
    display: none;
    margin: 15px auto;
    font-size: 15px;
  }

  .tab-content .tab-panel.active {
    display: block;
  }
</style>

<body>
  <div class="container">
    <h2>Tabé€‰é¡¹å¡</h2>
    <div class="tabs">
      <div class="tab-header">
        <span class="tab-item active">ç”¨æˆ·ç®¡ç†</span>
        <span class="tab-item">é…ç½®ç®¡ç†</span>
        <span class="tab-item">è§’è‰²ç®¡ç†</span>
        <span class="tab-item">å®šæ—¶ä»»åŠ¡</span>
        <span class="line"></span>
      </div>
      <div class="tab-content">
        <div class="tab-panel active">ç”¨æˆ·ç®¡ç†</div>
        <div class="tab-panel">é…ç½®ç®¡ç†</div>
        <div class="tab-panel">è§’è‰²ç®¡ç†</div>
        <div class="tab-panel">å®šæ—¶ä»»åŠ¡</div>
      </div>
    </div>

  </div>

</body>
<script>

  //å®šä¹‰$ï¼Œè·å–é¡µé¢èŠ‚ç‚¹
  const $ = s => document.querySelector(s);
  const $$ = s => document.querySelectorAll(s);

  //å¤šæ¬¡ç”¨åˆ°$$('.tabs .tab-item'),ç›´æ¥å®šä¹‰æˆç®€å•å˜é‡ä½¿ç”¨
  const $$tabItems = $$('.tabs .tab-item');
  //å¤šæ¬¡ç”¨åˆ°$$('.tabs .tab-panel'),ç›´æ¥å®šä¹‰æˆç®€å•å˜é‡ä½¿ç”¨
  const $$tabPanels = $$('.tabs .tab-panel');

  //å¾—åˆ°ç§»åŠ¨çº¿
  const $line = $('.tab-header .line');

  //ä¿è¯ä¸€å¼€å§‹çš„å®½åº¦æ­£ç¡®
  $line.style.width = $$tabItems[0].offsetWidth + 'px';

  //å¦‚æœå‚æ•°æ˜¯ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œé‚£ä¹ˆå‚æ•°ä»¥$å¼€å¤´
  $$tabItems.forEach($tab => {                                        //ç»™æ¯ä¸ªtab-itemåŠ ä¸Šç‚¹å‡»äº‹ä»¶
    $tab.onclick = function () {
      $$tabItems.forEach($tab => $tab.classList.remove('active'));    //å½“ç‚¹å‡»æ—¶ï¼Œå»é™¤æ‰€æœ‰itemä¸Šçš„activeæ ·å¼
      this.classList.add('active');                                   //thisä»£è¡¨è¢«ç‚¹å‡»çš„tab-item,ç»™è¢«ç‚¹å‡»çš„tab-itemåŠ ä¸Šactiveæ ·å¼

      // console.log(this);
      // console.log(this.offsetLeft);
      // console.log(this.offsetWidth);

      //ç»™ç§»åŠ¨çº¿è®¾ç½®å®½åº¦å’Œæ°´å¹³ä½ç§»çš„è·ç¦»
      $line.style.width = this.offsetWidth + 'px';
      $line.style.transform = `translateX(${this.offsetLeft}px)`;

      //å°†tab-itemçš„NodeListç±»æ•°ç»„å¯¹è±¡é€šè¿‡[...arg]å˜æˆæ•°ç»„ï¼Œå†é€šè¿‡indexOf()æ–¹æ³•è·å–æ¯ä¸ªtab-itemçš„ç´¢å¼•
      let index = [...$$tabItems].indexOf(this);

      //å½“ç‚¹å‡»æ—¶ï¼Œå»é™¤æ‰€æœ‰itemä¸Šçš„activeæ ·å¼                      
      $$tabPanels.forEach($panel => $panel.classList.remove('active')); 

      //å°†è¢«ç‚¹å‡»çš„tab-itemçš„ç´¢å¼•indexç»™tab-panelçš„NodeListï¼Œä½¿ç›¸åº”çš„tab-panelåŠ ä¸Šactiveæ ·å¼ï¼Œä½¿å…¶æ˜¾ç¤ºæ•ˆæœ
      $$tabPanels[index].classList.add('active');          
    }
  })

</script>

</html>
<!--

JSçš„æ€è·¯ï¼šè¯­ä¹‰æè¿°:1.å½“ç‚¹å‡»çš„æ—¶å€™åŠ ä¸Šactiveçš„æ•ˆæœï¼Œé‚»å±…å»é™¤æ ·å¼
                 2.æ˜¾ç¤ºç›¸åº”çš„é¢æ¿ï¼Œç‚¹ç¬¬å‡ ä¸ªé€‰é¡¹æ˜¾ç¤ºç¬¬å‡ ä¸ªé¢æ¿

ğŸ’¡-ä½¿ç”¨ offsetLeft å’Œ offsetWidth æ—¶éœ€è¦ç»™å…ƒç´ æ·»åŠ ç›¸å¯¹å®šä½

ğŸ’¡ -ç»™é‡å¤çš„ä»£ç è®¾ä¸ºä¸€ä¸ªç®€ä¾¿çš„å˜é‡è¡¨ç¤º(let $$ = ...)

ğŸ’¡ -å¸¸ç”¨çš„å‡½æ•°è®¾ç½®æˆåŒä¸€æ ‡å‡†çš„ç¬¦å·è¡¨ç¤º(let $ = å‡½æ•°)

ğŸ’¡ -ç”¨åˆ°å•¥å›å¿†ä¸€ä¸‹å­¦çš„ç›¸å…³çŸ¥è¯† 

ğŸ’¡ -ä½¿ç”¨ç®­å¤´å‡½æ•°

ğŸ’¡ -å½“è¦åˆå§‹åŒ–çš„æµç¨‹å°è£…æˆæ–¹æ³•ï¼ŒåŠ å…¥æ„é€ å‡½æ•°ä¸­

ğŸ’¡ -é€‰é¡¹å¡è¿™ä¸ªå°é¡¹ç›®çš„é€»è¾‘ï¼šé¢å‘è¿‡ç¨‹åˆ°é¢å‘å¯¹è±¡

ğŸ’¡

ğŸ’¡

ğŸ’¡

ï¼Ÿ-æ»‘åŠ¨æ•ˆæœå¦‚ä½•åšï¼Ÿ
  --ç»å¯¹å®šä½åŠ offsetLeft

ï¼Ÿ-å½“æ‹¥æœ‰å¤šä¸ªé€‰é¡¹å¡çš„æ—¶å€™ï¼Œç›¸äº’å½±å“æ€ä¹ˆåŠï¼Ÿ
  --å°†é€‰é¡¹å¡åŠŸèƒ½å°è£…æˆclass

ï¼Ÿ-...ç±»æ•°ç»„å¯¹è±¡

ï¼Ÿ-å½“å‡½æ•°ä¸­å‡ºç°å¤šä¸ªthisï¼Œä½†æ¯ä¸ªthisä¸åŒæˆ–æ”¹å˜äº†ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ


-->